<!DOCTYPE html>

<style>
    body {
        margin: 0;
        padding: 0;
    }

    .container {
        display: flex;
        justify-content: center;
        min-height: 100vh;
        display: flex;
        align-items: center;
        background-color: black;
        color: #FFF;
    }

    .coordinate-box {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
    }

    .coordinate-box>div {
        font-size: smaller;
        padding: 1.5px;
        width: 100px;
        height: 100px;
        color: black;
        background-color: #8A2BE2;
        margin: 1.5px;
    }
</style>

<body>

    <div class="container">
        <div class="coordinate-box">
            <div id="00">[0,0]</div>
            <div id="01">[0,1]</div>
            <div id="02">[0,2]</div>
            <div id="03">[0,3]</div>
            <div id="04">[0,4]</div>
            <div id="10">[1,0]</div>
            <div id="11">[1,1]</div>
            <div id="12">[1,2]</div>
            <div id="13">[1,3]</div>
            <div id="14">[1,4]</div>
            <div id="20">[2,0]</div>
            <div id="21">[2,1]</div>
            <div id="22">[2,2]</div>
            <div id="23">[2,3]</div>
            <div id="24">[2,4]</div>
            <div id="30">[3,0]</div>
            <div id="31">[3,1]</div>
            <div id="32">[3,2]</div>
            <div id="33">[3,3]</div>
            <div id="34">[3,4]</div>
            <div id="40">[4,0]</div>
            <div id="41">[4,1]</div>
            <div id="42">[4,2]</div>
            <div id="43">[4,3]</div>
            <div id="44">[4,4]</div>
        </div>
    </div>


    <script>

        const ws = new WebSocket('ws://localhost:9898/');
        var activeArea = 0;

        // function ping(){
        //     let msg = {message:'*ping'};
        //     ws.send(JSON.stringify(msg));
        //     tm = setTimeout(()=>{
        //         //
        //     }, 1000);
        // }
        // function pong() {
        //     clearTimeout(tm);
        // }

        ws.onopen = function () {
            //setInterval(ping, 50000);
            var message = { message: 'ws connected.' };
            ws.send(JSON.stringify(message));
        };

        function activateBlock(x, y) {
            let coordinate = x + '' + y;
            var elem = document.getElementById(coordinate);
            elem.style.backgroundColor = "#9400D3"
            elem.style.color = "#FFF";
        }
        function clear() {
            let x = -1;
            let y = -1;
            for (i = 0; i < 25; i++) {
                if (i % 5 == 0) {
                    x++;
                    y = -1;
                }
                y++;
                let coordinate = x + '' + y;
                var elem = document.getElementById(coordinate);
                elem.style.backgroundColor = "#8A2BE2";
                elem.style.color = "#000";
            }
        }


        ws.onmessage = function (e) {
            let robot = JSON.parse(e.data);
            clear();

            if (robot.active) {
                let x = robot.startPosition.x;
                let y = robot.startPosition.y;
                activateBlock(x, y);
            }
        };
        setInterval(() => {
            let msg = { message: 'give me data' };
            ws.send(JSON.stringify(msg));
        }, 1000);
    </script>
</body>

</html>